import pandas as pd
from datetime import datetime

time_range = pd.date_range("1:00", "4:30", freq="1min").tolist()
# timestamp = time_range[0]
# timestamp.second
# timestamp.hour

time_list = []
for time in time_range:
  if len(str(time.minute)) > 1:
    time_list.append(str(time.hour) + ':' + str(time.minute))
  else:
    time_list.append(str(time.hour) + ':0' + str(time.minute))

print(time_list)

# Initialiser toutes les valeurs Ã  0


time_dict = {}
for time in time_list:
  time_dict[time] = 0

print(time_dict)

for k in time_dict:
  for i, r in df_th.iterrows():
    if r['Start time'] < k and r['End time'] > k:
      time_dict[k] += 1


print(time_dict)

{'1:00': 0, '1:01': 0, '1:02': 0, '1:03': 0, '1:04': 0, '1:05': 0, '1:06': 0, '1:07': 0, '1:08': 0, '1:09': 0, '1:10': 0, '1:11': 0, '1:12': 0, '1:13': 0, '1:14': 0, '1:15': 0, '1:16': 0, '1:17': 0, '1:18': 0, '1:19': 0, '1:20': 0, '1:21': 0, '1:22': 0, '1:23': 0, '1:24': 0, '1:25': 0, '1:26': 0, '1:27': 0, '1:28': 0, '1:29': 0, '1:30': 0, '1:31': 0, '1:32': 0, '1:33': 0, '1:34': 0, '1:35': 0, '1:36': 0, '1:37': 0, '1:38': 0, '1:39': 0, '1:40': 0, '1:41': 0, '1:42': 0, '1:43': 0, '1:44': 0, '1:45': 0, '1:46': 0, '1:47': 0, '1:48': 0, '1:49': 0, '1:50': 0, '1:51': 0, '1:52': 0, '1:53': 0, '1:54': 0, '1:55': 0, '1:56': 0, '1:57': 0, '1:58': 0, '1:59': 0, '2:00': 0, '2:01': 0, '2:02': 0, '2:03': 0, '2:04': 0, '2:05': 0, '2:06': 0, '2:07': 0, '2:08': 0, '2:09': 0, '2:10': 0, '2:11': 0, '2:12': 0, '2:13': 0, '2:14': 0, '2:15': 0, '2:16': 0, '2:17': 0, '2:18': 0, '2:19': 0, '2:20': 0, '2:21': 0, '2:22': 0, '2:23': 0, '2:24': 0, '2:25': 0, '2:26': 0, '2:27': 0, '2:28': 0, '2:29': 0, '2:30': 0, '2:31': 0, '2:32': 0, '2:33': 0, '2:34': 0, '2:35': 0, '2:36': 0, '2:37': 0, '2:38': 0, '2:39': 0, '2:40': 0, '2:41': 0, '2:42': 0, '2:43': 0, '2:44': 0, '2:45': 0, '2:46': 0, '2:47': 0, '2:48': 0, '2:49': 0, '2:50': 0, '2:51': 0, '2:52': 0, '2:53': 0, '2:54': 0, '2:55': 0, '2:56': 0, '2:57': 0, '2:58': 0, '2:59': 0, '3:00': 0, '3:01': 0, '3:02': 0, '3:03': 0, '3:04': 0, '3:05': 0, '3:06': 0, '3:07': 0, '3:08': 0, '3:09': 0, '3:10': 0, '3:11': 0, '3:12': 0, '3:13': 0, '3:14': 0, '3:15': 0, '3:16': 0, '3:17': 0, '3:18': 0, '3:19': 0, '3:20': 0, '3:21': 0, '3:22': 0, '3:23': 0, '3:24': 0, '3:25': 0, '3:26': 0, '3:27': 0, '3:28': 0, '3:29': 0, '3:30': 0, '3:31': 0, '3:32': 0, '3:33': 0, '3:34': 0, '3:35': 0, '3:36': 0, '3:37': 0, '3:38': 0, '3:39': 0, '3:40': 0, '3:41': 0, '3:42': 0, '3:43': 0, '3:44': 0, '3:45': 0, '3:46': 0, '3:47': 0, '3:48': 0, '3:49': 0, '3:50': 0, '3:51': 0, '3:52': 0, '3:53': 0, '3:54': 0, '3:55': 0, '3:56': 0, '3:57': 0, '3:58': 0, '3:59': 0, '4:00': 0, '4:01': 0, '4:02': 0, '4:03': 0, '4:04': 0, '4:05': 0, '4:06': 0, '4:07': 0, '4:08': 0, '4:09': 0, '4:10': 0, '4:11': 0, '4:12': 0, '4:13': 0, '4:14': 0, '4:15': 0, '4:16': 0, '4:17': 0, '4:18': 0, '4:19': 0, '4:20': 0, '4:21': 0, '4:22': 0, '4:23': 0, '4:24': 0, '4:25': 0, '4:26': 0, '4:27': 0, '4:28': 0, '4:29': 0, '4:30': 0}
final_df = pd.DataFrame.from_dict(time_dict, orient='index')
final_df.plot(kind='area')
